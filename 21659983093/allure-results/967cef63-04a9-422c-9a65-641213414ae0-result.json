{"name": "Логин заблокированного пользователя", "status": "skipped", "statusDetails": {"message": "XFAIL\n\nAssertionError: Page URL expected to be 'https://www.saucedemo.com/inventory.html'\nActual value: https://www.saucedemo.com/ \nCall log:\n  - Expect \"to_have_url\" with timeout 5000ms\n    9 × unexpected value \"https://www.saucedemo.com/\"", "trace": "self = <test_page_login.TestsLogin object at 0x7fbe88e026e0>\nopen_home_page = <pages.site_pages.SitePages object at 0x7fbe88e03160>\ninput_value = ['locked_out_user', 'secret_sauce', 'Логин заблокированного пользователя', 'Пользователь заблокирован']\n\n    @pytest.mark.order(2)\n    @pytest.mark.regression\n    @pytest.mark.negative\n    @pytest.mark.login\n    @pytest.mark.all\n    @allure.story(\"Негативный сценарий\")\n    @allure.tag(\"negative\")\n    @allure.severity(allure.severity_level.MINOR)\n    @pytest.mark.xfail(strict=True)\n    @pytest.mark.parametrize(\"input_value\", login_date_negative)\n    def test_login_negative(self, open_home_page, input_value: list) -> None:\n        run_login_test(open_home_page, input_value)\n    \n        expect_visible(open_home_page.error_text, open_home_page.error_text)\n        actual_msg = open_home_page.error_text.locator('h3').text_content()\n        print(f\"  ⚠️ Ошибка: {actual_msg}\")\n        with allure.step(f\"Появилось сообщение об ошибке: {actual_msg}\"):\n            attach_screenshot(open_home_page.page, \"Скриншот с ошибкой\")\n        with allure.step(f\"Проверяем переход на '{LOGO_PAGE_PRODUCTS}'\"):\n>           open_home_page.page_products()\n\ntests/test_page_login.py:83: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/site_pages.py:56: in page_products\n    expect_url(self.page, BASE_URL + PATH_PRODUCTS)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npage = <Page url='https://www.saucedemo.com/'>\nexpected = 'https://www.saucedemo.com/inventory.html'\n\n    def expect_url(page: Page, expected: str) -> None:\n        \"\"\"\n            Нативный expect: URL страницы.\n        \"\"\"\n        with allure.step(f'Проверить URL: «{expected}»'):\n>           expect(page).to_have_url(expected)\nE           AssertionError: Page URL expected to be 'https://www.saucedemo.com/inventory.html'\nE           Actual value: https://www.saucedemo.com/ \nE           Call log:\nE             - Expect \"to_have_url\" with timeout 5000ms\nE               9 × unexpected value \"https://www.saucedemo.com/\"\n\nutils/checks.py:35: AssertionError"}, "description": "Пользователь заблокирован", "steps": [{"name": "Ввести учётные данные: locked_out_user / secret_sauce", "status": "passed", "steps": [{"name": "Проверить видимость элемента «Username»", "status": "passed", "start": 1770183521783, "stop": 1770183521799}, {"name": "Проверить атрибут placeholder = «Username»", "status": "passed", "start": 1770183521799, "stop": 1770183521815}, {"name": "Проверить видимость элемента «Password»", "status": "passed", "start": 1770183521869, "stop": 1770183521888}, {"name": "Проверить атрибут placeholder = «Password»", "status": "passed", "start": 1770183521888, "stop": 1770183521902}, {"name": "Проверить видимость элемента «Login»", "status": "passed", "start": 1770183521942, "stop": 1770183521955}, {"name": "Проверить атрибут value = «Login»", "status": "passed", "start": 1770183521955, "stop": 1770183521971}], "start": 1770183521777, "stop": 1770183521971}, {"name": "Нажать кнопку: Login", "status": "passed", "start": 1770183521971, "stop": 1770183522068}, {"name": "Проверить видимость элемента «<Locator frame=<Frame name= url='https://www.saucedemo.com/'> selector='#login_button_container > div > form > div.error-message-container.error'>»", "status": "passed", "start": 1770183522068, "stop": 1770183522087}, {"name": "Появилось сообщение об ошибке: Epic sadface: Sorry, this user has been locked out.", "status": "passed", "attachments": [{"name": "Скриншот с ошибкой", "source": "b495476f-0be4-49f0-81da-22dbf2e6e93e-attachment.png", "type": "image/png"}], "start": 1770183522107, "stop": 1770183522218}, {"name": "Проверяем переход на 'Products'", "status": "failed", "statusDetails": {"message": "AssertionError: Page URL expected to be 'https://www.saucedemo.com/inventory.html'\nActual value: https://www.saucedemo.com/ \nCall log:\n  - Expect \"to_have_url\" with timeout 5000ms\n    9 × unexpected value \"https://www.saucedemo.com/\"\n\n", "trace": "  File \"/home/runner/work/effective-mobile/effective-mobile/tests/test_page_login.py\", line 83, in test_login_negative\n    open_home_page.page_products()\n  File \"/home/runner/work/effective-mobile/effective-mobile/pages/site_pages.py\", line 56, in page_products\n    expect_url(self.page, BASE_URL + PATH_PRODUCTS)\n  File \"/home/runner/work/effective-mobile/effective-mobile/utils/checks.py\", line 35, in expect_url\n    expect(page).to_have_url(expected)\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 19191, in to_have_url\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/_impl/_assertions.py\", line 147, in to_have_url\n    await self._expect_impl(\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n"}, "steps": [{"name": "Проверить URL: «https://www.saucedemo.com/inventory.html»", "status": "failed", "statusDetails": {"message": "AssertionError: Page URL expected to be 'https://www.saucedemo.com/inventory.html'\nActual value: https://www.saucedemo.com/ \nCall log:\n  - Expect \"to_have_url\" with timeout 5000ms\n    9 × unexpected value \"https://www.saucedemo.com/\"\n\n", "trace": "  File \"/home/runner/work/effective-mobile/effective-mobile/utils/checks.py\", line 35, in expect_url\n    expect(page).to_have_url(expected)\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 19191, in to_have_url\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/_impl/_assertions.py\", line 147, in to_have_url\n    await self._expect_impl(\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n"}, "start": 1770183522218, "stop": 1770183527232}], "start": 1770183522218, "stop": 1770183527232}], "attachments": [{"name": "stdout", "source": "8ae60eea-cc5b-4353-851f-aacb3317d8f7-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "browser_name", "value": "'chromium'"}, {"name": "input_value", "value": "['locked_out_user', 'secret_sauce', 'Логин заблокированного пользователя', 'Пользователь заблокирован']"}], "start": 1770183521777, "stop": 1770183527233, "uuid": "d4e10f00-08c8-4094-a88f-e30590ac4f3c", "historyId": "b313dbed5a8cd7626cb46536219c660a", "testCaseId": "598f37e7459cf5e84fb561e8f38ba9e8", "fullName": "tests.test_page_login.TestsLogin#test_login_negative", "labels": [{"name": "severity", "value": "minor"}, {"name": "epic", "value": "Техническое задание: AQA Python"}, {"name": "story", "value": "Негативный сценарий"}, {"name": "tag", "value": "negative"}, {"name": "feature", "value": "Авторизация на https://www.saucedemo.com"}, {"name": "tag", "value": "all"}, {"name": "tag", "value": "login"}, {"name": "tag", "value": "negative"}, {"name": "tag", "value": "regression"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_page_login"}, {"name": "subSuite", "value": "TestsLogin"}, {"name": "host", "value": "runnervmkj6or"}, {"name": "thread", "value": "3175-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_page_login"}], "titlePath": ["tests", "test_page_login.py", "TestsLogin"]}